<!--
  ~ Copyright (c) 2020 - Department of Research & Development 
  ~ General Lighthouse Authorities of the UK and Ireland's.   
  ~
  ~ Permission is hereby granted, free of charge, to any person obtaining a copy
  ~ of this software and associated documentation files (the "Software"), to deal
  ~ in the Software without restriction, including without limitation the rights
  ~ to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
  ~ copies of the Software, and to permit persons to whom the Software is
  ~ furnished to do so, subject to the following conditions:
  ~
  ~ The above copyright notice and this permission notice shall be included in
  ~ all copies or substantial portions of the Software.
  -->

<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>e-Navigation VDES Controller</title>
    <link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" >
    <link rel="stylesheet" th:href="@{webjars/font-awesome/5.11.2/css/all.min.css}"/>
    <script th:src="@{/webjars/jquery/jquery.min.js}"></script>
    <script th:src="@{/webjars/sockjs-client/sockjs.min.js}"></script>
    <script th:src="@{/webjars/stomp-websocket/stomp.min.js}"></script>
    <script th:src="@{/static/vdesCtrl.js}"></script>
</head>
<body>
    <noscript>
        <h2 style="color: #ff0000">
            Seems your browser doesn't support Javascript!
            Websocket relies on Javascript being enabled.
            Please enable Javascript and reload this page!
        </h2>
    </noscript>
    <nav class="navbar navbar-dark bg-dark">
        <span class="navbar-brand mb-0 h1">e-Nav VDES Controller</span>
        <ul class="nav navbar-nav navbar-right">
            <li class="nav-item" sec:authorize="!isAuthenticated()">
                <a class="nav-link" href="/login" th:href="@{/login}">
                    <i class="fas fa-sign-in-alt"></i>&nbsp;Sign in
                </a>
            </li>
            <li sec:authorize="isAuthenticated()">
                <a class="nav-link" href="/logout" th:href="@{/logout}">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </a>
            </li>
        </ul>
    </nav>
    <div id="main-content" class="container mt-3">
        <div class="card" sec:authorize="!isAuthenticated()">
            <div class="card-header">
                <h2>Welcome</h2>
            </div>
            <div class="card-body">
                <div class="row">
                    <p class="m-2">Please sign-in to review the incoming AtoN messages.</p>
                </div>
                <div class="row d-flex justify-content-center">
                    <div class="btn btn-primary text-">
                        <a class="text-light" href="/login" th:href="@{/login}">
                            <i class="fas fa-sign-in-alt"></i>&nbsp;Sign in
                        </a>
                    </div>
                </div>
            </div>
        </div>
        <div class="card" sec:authorize="isAuthenticated()">
            <div class="card-header">
                <h2>AtoN Message Board</h2>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-12">
                        <div class="row form-group">
                            <div class="col-md-4 d-flex align-items-center">
                                <label class="m-1" for="connect">Endpoint Connection:</label>
                                <select name="VDES Connection" id="endpoint">
                                    <option th:each="endpoint : ${endpoints}" th:value="${endpoint}" th:text="${endpoint}"/>
                                </select>
                            </div>
                            <div class="col-md-8">
                                <button id="connect" class="btn btn-primary" type="button">Connect</button>
                                <button id="disconnect" class="btn btn-secondary" type="button" disabled="disabled">Disconnect</button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-12">
                        <table id="messages" class="table table-striped text-break">
                            <thead>
                            <tr class="d-flex">
                                <th class="col-4">Aton UID</th>
                                <th class="col-4">Date</th>
                                <th class="col-2">Latitude</th>
                                <th class="col-2">Longitude</th>
                            </tr>
                            </thead>
                            <tbody id="incoming">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>